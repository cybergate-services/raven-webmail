{"version":3,"file":"Account-f5055c3a.js","sources":["../../src/comp/CircularGraph/CircularGraph.svelte","../../src/comp/CircularGraph/Arc.svelte","../../src/comp/Pages/Account/Account.svelte","../../src/lib/router/routes/Account.svelte"],"sourcesContent":["<script>\n    export let start; // 0 to 1\n    export let end; // 0 to 1\n    export let width = null;\n    export let height = null;\n\n    const polarToCartesian = (cX, cY, radius, degrees) => {\n        const radians = (degrees - 180) * Math.PI / 180;\n        return {\n            x: cX + (radius * Math.cos(radians)),\n            y: cY + (radius * Math.sin(radians))\n        }\n    }\n\n    const describeArc = (x, y, radius, startA, endA) => {\n        const start = polarToCartesian(x, y, radius, endA)\n        const end = polarToCartesian(x, y, radius, startA)\n\n        const largeArcFlag = endA - startA <= 180 ? \"0\" : \"1\";\n\n        return `\n            M ${start.x}, ${start.y}\n            A ${radius} ${radius} 0 ${largeArcFlag} 0 ${end.x} ${end.y}\n        `;\n    }\n\n    let d;\n    $: d = describeArc(start * 180, end * 180);\n</script>\n\n<svg {height} {width} viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid meet\">\n    <slot />\n</svg>","<script>\n    export let start; // 0 to 1\n    export let end; // 0 to 1\n    export let strokeWidth = \"var(--stroke-width, 5)\";\n    export let stroke = \"transparent\";\n    export let fill = \"transparent\";\n\n    const polarToCartesian = (cX, cY, radius, degrees) => {\n        const radians = (degrees - 180) * Math.PI / 180;\n        return {\n            x: cX + (radius * Math.cos(radians)),\n            y: cY + (radius * Math.sin(radians))\n        }\n    }\n\n    const describeArc = (x, y, radius, startA, endA) => {\n        const start = polarToCartesian(x, y, radius, endA)\n        const end = polarToCartesian(x, y, radius, startA)\n\n        const largeArcFlag = endA - startA <= 180 ? \"0\" : \"1\";\n\n        return `\n            M ${start.x}, ${start.y}\n            A ${radius} ${radius} 0 ${largeArcFlag} 0 ${end.x} ${end.y}\n        `;\n    }\n\n    let d;\n    $: d = describeArc(50, 50, 35, start * 360 + 90, end * 360 + 90);\n</script>\n\n<path {d} style=\"stroke: {stroke}; fill: {fill}; stroke-width: {strokeWidth}; stroke-linecap: round;\"></path>","<style>\n\n    x-account {\n        display: flex;\n        flex-direction: column;\n        --spacing: 1.5rem;\n        background: rgba(0,0,0,0.025);\n        overflow-x: hidden;\n        overflow-y: auto;\n        height: 100%;\n    }\n\n    .bottom-space {\n        height: 7em;\n        flex: none;\n    }\n\n    .main {\n        flex: none;\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        padding: var(--spacing);\n        padding-top: calc(var(--spacing) * 2);\n    }\n\n    .main > .end {\n        display: flex;\n        flex-direction: column;\n        margin-left: 2em;\n    }\n\n    .main > .end > div {\n        flex: none;\n        white-space: nowrap;\n        line-height: 1.5em;\n    }\n\n    .letter {\n        font-size: 3em;\n        text-transform: uppercase;\n        width: 2em;\n        height: 2em;\n        background: var(--pc);\n        color: #fff;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex: none;\n    }\n\n    .cols {\n        padding: 0 calc(var(--spacing) * 0.5);\n        display: flex;\n        flex: none;\n    }\n\n\n    .wide .cols {\n        //flex-direction: row;\n        flex-direction: column;\n    }\n\n    .narrow .cols {\n        flex-direction: column;\n    }\n\n    .narrow .col {\n        width: 100%;\n    }\n\n    .wide .col {\n        width: 100%;\n        //width: 50%;\n    }\n\n    .col {\n        box-sizing: border-box;\n        padding: 0 calc(var(--spacing) * 0.5);\n        flex: none;\n        display: flex;\n        flex-direction: column;\n    }\n\n    .box {\n        margin: calc(var(--spacing) * 0.5) 0;\n        flex: none;\n    }\n\n    .col-2{}\n\n    .quota {}\n    .quota-body {\n        display: flex;\n        flex-direction: row;\n        flex: none;\n    }\n\n    .quota-body > :global(svg) {\n        width: 10em;\n        height: 10em;\n    }\n\n    .quota-desc {\n        flex: none;\n        align-self: center;\n    }\n\n    .quota-desc > .percent {\n        font-size: 1.5em;\n        font-weight: 500;\n        color: var(--pc);\n        margin-bottom: 0.1em;\n    }\n\n    .quota-desc > .used {\n        font-size: 1.15em;\n        color: #333;\n    }\n\n    .quota-desc > .total {\n        font-size: 1.15em;\n        color: #666;\n    }\n\n\n    .unimplemented {\n        height: 25em;\n    }\n</style>\n\n<script>\n    export let user;\n\n    import {getContext} from \"svelte\";\n    const {locale: l, trans} = getContext(\"app\");\n    export let locale = $l.myAccount;\n\n    console.log(user);\n\n    let clientWidth = 0;\n    let letter = user.name[0] || \"\";\n\n    let narrow, wide;\n    $: narrow = clientWidth < 900;\n    $: wide = !narrow;\n\n    import CircularGraph from \"comp@CircularGraph/CircularGraph.svelte\";\n    import Arc from \"comp@CircularGraph/Arc.svelte\";\n\n    const GB = (size) => (size / 1024 ** 3).toFixed(2);\n</script>\n\n<x-account bind:clientWidth class:narrow class:wide>\n    <div class=\"main\">\n        <div class=\"letter\">{letter}</div>\n        <div class=\"end\">\n            <div class=\"name\">{user.name}</div>\n            <div class=\"username\">{user.username}</div>\n            <div class=\"address\">{user.address}</div>\n        </div>\n    </div>\n    <div class=\"cols\">\n        <div class=\"col col-1\">\n            <div class=\"box quota storage-quota\">\n                <div class=\"box-title\">{locale.limits.storage.title}</div>\n                <div class=\"quota-body\">\n                    <CircularGraph>\n                        <Arc start={0} end={0.99} stroke=\"rgba(0,0,0,0.075)\" />\n                        <Arc start={0} end={user.limits.quota.used / user.limits.quota.allowed} stroke=\"var(--pc)\" />\n                    </CircularGraph>\n                    <div class=\"quota-desc\">\n                        <div class=\"percent\">{Math.round(user.limits.quota.used / user.limits.quota.allowed * 100)}%</div>\n                        <div class=\"used\">{$trans(\"myAccount.limits.gbUsed\", {gb: GB(user.limits.quota.used)})}</div>\n                        <div class=\"total\">{$trans(\"myAccount.limits.gbTotal\", {gb: GB(user.limits.quota.allowed)})}</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"box quota imap-download-quota\">\n                <div class=\"box-title\">{locale.limits.imapDownload.title}</div>\n                <div class=\"quota-body\">\n                    <CircularGraph>\n                        <Arc start={0} end={0.99} stroke=\"rgba(0,0,0,0.075)\" />\n                        <Arc start={0} end={user.limits.imapDownload.used / user.limits.imapDownload.allowed} stroke=\"var(--pc)\" />\n                    </CircularGraph>\n                    <div class=\"quota-desc\">\n                        <div class=\"percent\">{Math.round(user.limits.imapDownload.used / user.limits.imapDownload.allowed * 100)}%</div>\n                        <div class=\"used\">{$trans(\"myAccount.limits.gbUsed\", {gb: GB(user.limits.imapDownload.used / 8)})}</div>\n                        <div class=\"total\">{$trans(\"myAccount.limits.gbTotal\", {gb: GB(user.limits.imapDownload.allowed / 8)})}</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"box quota imap-upload-quota\">\n                <div class=\"box-title\">{locale.limits.imapUpload.title}</div>\n                <div class=\"quota-body\">\n                    <CircularGraph>\n                        <Arc start={0} end={0.99} stroke=\"rgba(0,0,0,0.075)\" />\n                        <Arc start={0} end={user.limits.imapUpload.used / user.limits.imapUpload.allowed} stroke=\"var(--pc)\" />\n                    </CircularGraph>\n                    <div class=\"quota-desc\">\n                        <div class=\"percent\">{Math.round(user.limits.imapUpload.used / user.limits.imapUpload.allowed * 100)}%</div>\n                        <div class=\"used\">{$trans(\"myAccount.limits.gbUsed\", {gb: GB(user.limits.imapUpload.used / 8)})}</div>\n                        <div class=\"total\">{$trans(\"myAccount.limits.gbTotal\", {gb: GB(user.limits.imapUpload.allowed / 8)})}</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"box quota pop3-download-quota\">\n                <div class=\"box-title\">{locale.limits.pop3Download.title}</div>\n                <div class=\"quota-body\">\n                    <CircularGraph>\n                        <Arc start={0} end={0.99} stroke=\"rgba(0,0,0,0.075)\" />\n                        <Arc start={0} end={user.limits.pop3Download.used / user.limits.pop3Download.allowed} stroke=\"var(--pc)\" />\n                    </CircularGraph>\n                    <div class=\"quota-desc\">\n                        <div class=\"percent\">{Math.round(user.limits.pop3Download.used / user.limits.pop3Download.allowed * 100)}%</div>\n                        <div class=\"used\">{$trans(\"myAccount.limits.gbUsed\", {gb: GB(user.limits.pop3Download.used / 8)})}</div>\n                        <div class=\"total\">{$trans(\"myAccount.limits.gbTotal\", {gb: GB(user.limits.pop3Download.allowed / 8)})}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"bottom-space\"></div>\n</x-account>","<script context=\"module\">\n    import {user} from  \"../../client/client\";\n\n    export async function preload($page, {client}) {\n       if (!user.get()) {\n            return this.redirect(\"#!/login\");\n        }\n    }\n</script>\n\n<script>\n    import Account from \"comp@Pages/Account/Account.svelte\";\n    import {getContext} from \"svelte\";\n    const {locale} = getContext(\"app\");\n</script>\n\n<svelte:head>\n    <title>{$locale.myAccount.title}</title>\n</svelte:head>\n\n<Account user={$user} />"],"names":["start","end","width","height","polarToCartesian","cX","cY","radius","degrees","radians","Math","PI","x","cos","y","sin","describeArc","startA","endA","largeArcFlag","d","ctx","strokeWidth","stroke","fill","limits","quota","used","allowed","imapDownload","imapUpload","pop3Download","name","username","address","storage","title","round","gb","user","locale","l","trans","getContext","$l","myAccount","console","log","narrow","wide","clientWidth","letter","size","toFixed","preload","$page","client","get","this","redirect"],"mappings":"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"}