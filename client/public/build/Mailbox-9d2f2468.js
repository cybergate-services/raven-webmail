import{J as e,S as t,a as n,s,o as i,b as o,c as l,h as r,n as a,d as c,K as m,e as d,k as g,w as u,g as $,L as h,t as f,x as p,r as w,m as x,M as v,y as b,C as B,D as L,E as y,F as z,j as M,G as j,N as k,O as H,P as V,Q as C,R as A,T as D,U as Z,V as _,W as T,X as E,Y as S,Z as N,_ as F,$ as Y,a0 as I,l as P,a1 as U,a2 as G,a3 as J,a4 as K,a5 as O,a6 as Q,a7 as R,a8 as W,a9 as X,aa as q,ab as ee,ac as te,ad as ne,ae as se,u as ie,af as oe}from"./main-c5d44373.js";import{T as le,a as re,M as ae,b as ce,c as me,U as de}from"./MoveTo-62364909.js";const ge=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],ue=["dom","lun","mar","mie","jue","vie","sab"],$e=e=>{const t=new Date,n=new Date(e);return t.getFullYear()!==n.getFullYear()?`${ge[n.getMonth()]} ${n.getFullYear()}`:t.getMonth()!==n.getMonth()?`${n.getDate()} ${ge[n.getMonth()]}`:t.getDate()!==n.getDate()?`${ue[n.getDay()]} ${n.getDate()}`:`${n.getHours()}:${s=n.getMinutes(),s.toString().padStart(2,"0")}`;var s};function he(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),r(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:a,o:a,d(e){e&&c(t)}}}function fe(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:r="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,r=e.viewBox)},[i,o,l,r,s]}class pe extends t{constructor(e){super(),n(this,e,fe,he,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function we(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),r(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:a,o:a,d(e){e&&c(t)}}}function xe(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:r="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,r=e.viewBox)},[i,o,l,r,s]}class ve extends t{constructor(e){super(),n(this,e,xe,we,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function be(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),r(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:a,o:a,d(e){e&&c(t)}}}function Be(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:r="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,r=e.viewBox)},[i,o,l,r,s]}class Le extends t{constructor(e){super(),n(this,e,Be,be,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function ye(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),r(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:a,o:a,d(e){e&&c(t)}}}function ze(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:r="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,r=e.viewBox)},[i,o,l,r,s]}class Me extends t{constructor(e){super(),n(this,e,ze,ye,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function je(e){let t;const n=new Le({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){j(n,e)}}}function ke(e){let t;const n=new Me({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){j(n,e)}}}function He(e){let t;const n=new pe({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){j(n,e)}}}function Ve(e){let t;const n=new ve({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){j(n,e)}}}function Ce(e){let t,n=(e[6].from.name||e[6].from.address||"")+"";return{c(){t=$(n)},m(e,n){l(e,t,n)},p(e,s){64&s&&n!==(n=(e[6].from.name||e[6].from.address||"")+"")&&M(t,n)},d(e){e&&c(t)}}}function Ae(e){let t,n,s=(e[6].to||[]).map(Ze).filter(Boolean).join(", ")+"";return{c(){t=d("span"),t.textContent="Para: ",n=$(s),o(t,"class","for")},m(e,s){l(e,t,s),l(e,n,s)},p(e,t){64&t&&s!==(s=(e[6].to||[]).map(Ze).filter(Boolean).join(", ")+"")&&M(n,s)},d(e){e&&c(t),e&&c(n)}}}function De(e){let t,n,s,i,a,k,H,V,C,A,D,Z,_,T,E,S,N,F,Y,I,P,U,G,J,K,O=(e[6].subject||"")+"",Q=(e[6].intro||"")+"",R=(e[6].date&&$e(e[6].date))+"";const W=[ke,je],X=[];function q(e,t){return e[4]?0:1}s=q(e),i=X[s]=W[s](e);const ee=new m({}),te=[Ve,He],ne=[];function se(e,t){return e[6].flagged?0:1}V=se(e),C=ne[V]=te[V](e);const ie=new m({});function oe(e,t){return e[3]||e[2]?Ae:Ce}let le=oe(e),re=le(e);return{c(){t=d("a"),n=d("x-cell"),i.c(),a=g(),u(ee.$$.fragment),k=g(),H=d("x-cell"),C.c(),A=g(),u(ie.$$.fragment),D=g(),Z=d("x-cell"),re.c(),_=g(),T=d("x-cell"),E=d("span"),S=$(O),N=g(),F=d("span"),Y=$(Q),I=g(),P=d("x-cell"),U=$(R),h(n,"class","btn-dark icon cell-selected svelte-gohjp2"),h(H,"class","btn-dark icon svelte-gohjp2"),f(H,"flagged",e[6].flagged),h(Z,"class","from svelte-gohjp2"),o(E,"class","subject"),o(F,"class","intro svelte-gohjp2"),h(T,"class","subject-intro svelte-gohjp2"),h(P,"class","date svelte-gohjp2"),o(t,"href",G="#!/mailbox/"+e[5].id+"/message/"+e[6].id),o(t,"class","na message svelte-gohjp2"),f(t,"selected",e[4]),f(t,"unseen",!e[6].seen)},m(i,o,c){l(i,t,o),r(t,n),X[s].m(n,null),r(n,a),p(ee,n,null),r(t,k),r(t,H),ne[V].m(H,null),r(H,A),p(ie,H,null),r(t,D),r(t,Z),re.m(Z,null),r(t,_),r(t,T),r(T,E),r(E,S),r(T,N),r(T,F),r(F,Y),r(t,I),r(t,P),r(P,U),J=!0,c&&w(K),K=[x(n,"click",v(b(e[16]))),x(H,"click",v(b(e[9]))),x(t,"click",e[10])]},p(e,[l]){let r=s;s=q(e),s!==r&&(B(),L(X[r],1,1,()=>{X[r]=null}),y(),i=X[s],i||(i=X[s]=W[s](e),i.c()),z(i,1),i.m(n,a));let c=V;V=se(e),V!==c&&(B(),L(ne[c],1,1,()=>{ne[c]=null}),y(),C=ne[V],C||(C=ne[V]=te[V](e),C.c()),z(C,1),C.m(H,A)),64&l&&f(H,"flagged",e[6].flagged),le===(le=oe(e))&&re?re.p(e,l):(re.d(1),re=le(e),re&&(re.c(),re.m(Z,null))),(!J||64&l)&&O!==(O=(e[6].subject||"")+"")&&M(S,O),(!J||64&l)&&Q!==(Q=(e[6].intro||"")+"")&&M(Y,Q),(!J||64&l)&&R!==(R=(e[6].date&&$e(e[6].date))+"")&&M(U,R),(!J||96&l&&G!==(G="#!/mailbox/"+e[5].id+"/message/"+e[6].id))&&o(t,"href",G),16&l&&f(t,"selected",e[4]),64&l&&f(t,"unseen",!e[6].seen)},i(e){J||(z(i),z(ee.$$.fragment,e),z(C),z(ie.$$.fragment,e),J=!0)},o(e){L(i),L(ee.$$.fragment,e),L(C),L(ie.$$.fragment,e),J=!1},d(e){e&&c(t),X[s].d(),j(ee),ne[V].d(),j(ie),re.d(),w(K)}}}const Ze=e=>e.name||e.address;function _e(t,n,s){let i,o,l,r=a,c=()=>(r(),r=V(w,e=>s(5,o=e)),w),m=a,d=()=>(m(),m=V(p,e=>s(6,l=e)),p);t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>m());const g=k("mailbox-selection"),{isSelected:u,add:$,remove:h,toggle:f}=g;H(t,u,e=>s(12,i=e));let{message:p}=n;d();let{mailbox:w}=n;c();let x;C(()=>x&&x());let v,b,B;return t.$set=e=>{"message"in e&&d(s(0,p=e.message)),"mailbox"in e&&c(s(1,w=e.mailbox))},t.$$.update=()=>{2&t.$$.dirty&&s(2,v=w===A),2&t.$$.dirty&&s(3,b=w===D),4097&t.$$.dirty&&s(4,B=i(p))},[p,w,v,b,B,o,l,u,f,e=>{Z(o.id,[l.id],!l.flagged),p.update(e=>({...e,flagged:!e.flagged}))},async t=>{if(v){t.preventDefault(),l.seen||p.update(e=>({...e,seen:!0}));const n=await _(l.id),s=e(n);x=s.subscribe(e=>{p.update(t=>({...t,...e}))}),T(s)}},x,i,g,$,h,()=>f(p)]}class Te extends t{constructor(e){super(),n(this,e,_e,De,s,{message:0,mailbox:1})}}function Ee(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),r(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:a,o:a,d(e){e&&c(t)}}}function Se(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:r="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,r=e.viewBox)},[i,o,l,r,s]}class Ne extends t{constructor(e){super(),n(this,e,Se,Ee,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Fe(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,17H7V7H17V17Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),r(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:a,o:a,d(e){e&&c(t)}}}function Ye(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:r="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,r=e.viewBox)},[i,o,l,r,s]}class Ie extends t{constructor(e){super(),n(this,e,Ye,Fe,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Pe(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),r(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:a,o:a,d(e){e&&c(t)}}}function Ue(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:r="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,r=e.viewBox)},[i,o,l,r,s]}class Ge extends t{constructor(e){super(),n(this,e,Ue,Pe,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Je(e){let t,n;return{c(){t=i("svg"),n=i("path"),o(n,"d","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,s){l(e,t,s),r(t,n)},p(e,[s]){4&s&&o(n,"fill",e[2]),1&s&&o(t,"width",e[0]),2&s&&o(t,"height",e[1]),8&s&&o(t,"viewBox",e[3])},i:a,o:a,d(e){e&&c(t)}}}function Ke(e,t,n){let{size:s="1em"}=t,{width:i=s}=t,{height:o=s}=t,{color:l="currentColor"}=t,{viewBox:r="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,s=e.size),"width"in e&&n(0,i=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,r=e.viewBox)},[i,o,l,r,s]}class Oe extends t{constructor(e){super(),n(this,e,Ke,Je,s,{size:4,width:0,height:1,color:2,viewBox:3})}}function Qe(e,t,n){const s=e.slice();return s[33]=t[n],s}function Re(e){let t;const n=new Ie({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){j(n,e)}}}function We(e){let t;const n=new Me({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){j(n,e)}}}function Xe(e){let t;const n=new Le({});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){j(n,e)}}}function qe(e){let t,n,s,i,a,f,w,v,b,k,H,V,C,A,D,Z,_,T,E,S,N,Y,I,P,U=e[11].length+"",G=1===e[11].length?"mensaje":"mensajes";const J=[tt,et],K=[];function O(e,t){return 2048&t[0]&&(s=!!e[11].every(ut)),s?0:1}i=O(e,[-1]),a=K[i]=J[i](e);const Q=[st,nt],R=[];function q(e,t){return e[7]?0:e[9]||e[10]||e[8]?-1:1}~(w=q(e))&&(v=R[w]=Q[w](e));const ee=new ne({}),te=new m({}),se=new ae({props:{mailbox:e[0],selection:e[3]}});se.$on("moved",e[17]);const ie=new Ge({});return{c(){t=d("div"),n=d("x-action-group"),a.c(),f=g(),v&&v.c(),b=g(),k=d("x-action"),u(ee.$$.fragment),H=g(),u(te.$$.fragment),C=g(),A=d("x-action-group"),u(se.$$.fragment),D=g(),Z=d("x-selection-info"),u(ie.$$.fragment),_=g(),T=d("span"),E=$(U),S=g(),N=$(G),h(k,"class","btn-dark"),h(k,"data-tooltip",V=e[8]?"Eliminar definitivamente":e[9]?"Descartar borradores":"Eliminar"),o(T,"class","svelte-1e9rorb"),h(Z,"class","svelte-1e9rorb"),o(t,"class","only-when-selection svelte-1e9rorb")},m(s,o,a){l(s,t,o),r(t,n),K[i].m(n,null),r(n,f),~w&&R[w].m(n,null),r(n,b),r(n,k),p(ee,k,null),r(k,H),p(te,k,null),r(t,C),r(t,A),p(se,A,null),r(t,D),r(t,Z),p(ie,Z,null),r(Z,_),r(Z,T),r(T,E),r(T,S),r(T,N),I=!0,a&&P(),P=x(k,"click",e[31])},p(e,t){let s=i;i=O(e,t),i===s?K[i].p(e,t):(B(),L(K[s],1,1,()=>{K[s]=null}),y(),a=K[i],a||(a=K[i]=J[i](e),a.c()),z(a,1),a.m(n,f));let o=w;w=q(e),w===o?~w&&R[w].p(e,t):(v&&(B(),L(R[o],1,1,()=>{R[o]=null}),y()),~w?(v=R[w],v||(v=R[w]=Q[w](e),v.c()),z(v,1),v.m(n,b)):v=null),(!I||768&t[0]&&V!==(V=e[8]?"Eliminar definitivamente":e[9]?"Descartar borradores":"Eliminar"))&&h(k,"data-tooltip",V);const l={};1&t[0]&&(l.mailbox=e[0]),8&t[0]&&(l.selection=e[3]),se.$set(l),(!I||2048&t[0])&&U!==(U=e[11].length+"")&&M(E,U),(!I||2048&t[0])&&G!==(G=1===e[11].length?"mensaje":"mensajes")&&M(N,G)},i(e){I||(z(a),z(v),z(ee.$$.fragment,e),z(te.$$.fragment,e),z(se.$$.fragment,e),z(ie.$$.fragment,e),e&&F(()=>{Y||(Y=W(t,X,{duration:150},!0)),Y.run(1)}),I=!0)},o(e){L(a),L(v),L(ee.$$.fragment,e),L(te.$$.fragment,e),L(se.$$.fragment,e),L(ie.$$.fragment,e),e&&(Y||(Y=W(t,X,{duration:150},!1)),Y.run(0)),I=!1},d(e){e&&c(t),K[i].d(),~w&&R[w].d(),j(ee),j(te),j(se),j(ie),e&&Y&&Y.end(),P()}}}function et(e){let t,n,s,i;const o=new ce({}),$=new m({});return{c(){t=d("x-action"),u(o.$$.fragment),n=g(),u($.$$.fragment),h(t,"class","btn-dark"),h(t,"data-tooltip","Marcar como no leído")},m(a,c,m){l(a,t,c),p(o,t,null),r(t,n),p($,t,null),s=!0,m&&i(),i=x(t,"click",e[28])},p:a,i(e){s||(z(o.$$.fragment,e),z($.$$.fragment,e),s=!0)},o(e){L(o.$$.fragment,e),L($.$$.fragment,e),s=!1},d(e){e&&c(t),j(o),j($),i()}}}function tt(e){let t,n,s,i;const o=new me({}),$=new m({});return{c(){t=d("x-action"),u(o.$$.fragment),n=g(),u($.$$.fragment),h(t,"class","btn-dark"),h(t,"data-tooltip","Marcar como leído")},m(a,c,m){l(a,t,c),p(o,t,null),r(t,n),p($,t,null),s=!0,m&&i(),i=x(t,"click",e[27])},p:a,i(e){s||(z(o.$$.fragment,e),z($.$$.fragment,e),s=!0)},o(e){L(o.$$.fragment,e),L($.$$.fragment,e),s=!1},d(e){e&&c(t),j(o),j($),i()}}}function nt(e){let t,n,s,i;const o=new se({}),$=new m({});return{c(){t=d("x-action"),u(o.$$.fragment),n=g(),u($.$$.fragment),h(t,"class","btn-dark"),h(t,"data-tooltip","Marcar como spam")},m(a,c,m){l(a,t,c),p(o,t,null),r(t,n),p($,t,null),s=!0,m&&i(),i=x(t,"click",e[30])},p:a,i(e){s||(z(o.$$.fragment,e),z($.$$.fragment,e),s=!0)},o(e){L(o.$$.fragment,e),L($.$$.fragment,e),s=!1},d(e){e&&c(t),j(o),j($),i()}}}function st(e){let t,n,s,i;const o=new de({}),$=new m({});return{c(){t=d("x-action"),u(o.$$.fragment),n=g(),u($.$$.fragment),h(t,"class","btn-dark"),h(t,"data-tooltip","No es spam")},m(a,c,m){l(a,t,c),p(o,t,null),r(t,n),p($,t,null),s=!0,m&&i(),i=x(t,"click",e[29])},p:a,i(e){s||(z(o.$$.fragment,e),z($.$$.fragment,e),s=!0)},o(e){L(o.$$.fragment,e),L($.$$.fragment,e),s=!1},d(e){e&&c(t),j(o),j($),i()}}}function it(e){let t,n,s,i,o,a,$,f,v,b,M,k,H;const V=new m({}),C=[Xe,We,Re],A=[];function D(e,t){return 0===e[11].length?0:e[11].length===e[12].length?1:2}i=D(e),o=A[i]=C[i](e);const Z=new Ne({}),_=new m({});let T=0!==e[11].length&&qe(e);return{c(){t=d("x-action-group"),n=d("x-action"),u(V.$$.fragment),s=g(),o.c(),a=g(),$=d("x-action"),f=d("div"),u(Z.$$.fragment),v=g(),u(_.$$.fragment),b=g(),T&&T.c(),M=P(),h(n,"class","btn-dark"),h(n,"data-tooltip","Seleccionar"),q(f,"display","flex"),q(f,"transition","transform 300ms ease"),q(f,"transform","rotate("+360*e[5]+"deg)"),h($,"class","btn-dark reload"),h($,"data-tooltip","Actualizar"),h(t,"class","select svelte-1e9rorb")},m(o,c,m){l(o,t,c),r(t,n),p(V,n,null),r(n,s),A[i].m(n,null),r(t,a),r(t,$),r($,f),p(Z,f,null),r($,v),p(_,$,null),l(o,b,c),T&&T.m(o,c),l(o,M,c),k=!0,m&&w(H),H=[x(n,"click",e[16]),x($,"click",e[21])]},p(e,t){let s=i;i=D(e),i!==s&&(B(),L(A[s],1,1,()=>{A[s]=null}),y(),o=A[i],o||(o=A[i]=C[i](e),o.c()),z(o,1),o.m(n,null)),(!k||32&t[0])&&q(f,"transform","rotate("+360*e[5]+"deg)"),0!==e[11].length?T?(T.p(e,t),2048&t[0]&&z(T,1)):(T=qe(e),T.c(),z(T,1),T.m(M.parentNode,M)):T&&(B(),L(T,1,1,()=>{T=null}),y())},i(e){k||(z(V.$$.fragment,e),z(o),z(Z.$$.fragment,e),z(_.$$.fragment,e),z(T),k=!0)},o(e){L(V.$$.fragment,e),L(o),L(Z.$$.fragment,e),L(_.$$.fragment,e),L(T),k=!1},d(e){e&&c(t),j(V),A[i].d(),j(Z),j(_),e&&c(b),T&&T.d(e),e&&c(M),w(H)}}}function ot(e){let t,n=!e[6]&&lt();return{c(){n&&n.c(),t=P()},m(e,s){n&&n.m(e,s),l(e,t,s)},p(e,s){e[6]?n&&(n.d(1),n=null):n||(n=lt(),n.c(),n.m(t.parentNode,t))},d(e){n&&n.d(e),e&&c(t)}}}function lt(e){let t;return{c(){t=d("x-mailbox-empty"),t.innerHTML='<span class="label svelte-1e9rorb">No hay mensajes en esta carpeta</span>',h(t,"class","svelte-1e9rorb")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function rt(e,t){let n,s,i,o;const r=new Te({props:{message:t[33],mailbox:t[0]}});return{key:e,first:null,c(){n=d("x-mailbox-message"),u(r.$$.fragment),h(n,"class","svelte-1e9rorb"),this.first=n},m(e,t){l(e,n,t),p(r,n,null),o=!0},p(e,t){const n={};4096&t[0]&&(n.message=e[33]),1&t[0]&&(n.mailbox=e[0]),r.$set(n)},i(e){o||(z(r.$$.fragment,e),e&&F(()=>{i&&i.end(1),s||(s=Y(n,t[23],{duration:150})),s.start()}),o=!0)},o(e){L(r.$$.fragment,e),s&&s.invalidate(),e&&(i=I(n,t[24],{})),o=!1},d(e){e&&c(n),j(r),e&&i&&i.end()}}}function at(e){let t,n,s,i;const o=[mt,ct],r=[];function a(e,t){return e[6]?0:e[14]?1:-1}return~(n=a(e))&&(s=r[n]=o[n](e)),{c(){t=d("x-loadmore"),s&&s.c(),h(t,"class","svelte-1e9rorb")},m(e,s){l(e,t,s),~n&&r[n].m(t,null),i=!0},p(e,i){let l=n;n=a(e),n===l?~n&&r[n].p(e,i):(s&&(B(),L(r[l],1,1,()=>{r[l]=null}),y()),~n?(s=r[n],s||(s=r[n]=o[n](e),s.c()),z(s,1),s.m(t,null)):s=null)},i(e){i||(z(s),i=!0)},o(e){L(s),i=!1},d(e){e&&c(t),~n&&r[n].d()}}}function ct(e){let t,n,s,i;const o=new Oe({});return{c(){t=d("x-loadmore-button"),u(o.$$.fragment),h(t,"class","btn-dark svelte-1e9rorb")},m(n,r,a){l(n,t,r),p(o,t,null),s=!0,a&&i(),i=x(t,"click",e[22])},p:a,i(e){s||(z(o.$$.fragment,e),e&&(n||F(()=>{n=Y(t,X,{delay:150,duration:150}),n.start()})),s=!0)},o(e){L(o.$$.fragment,e),s=!1},d(e){e&&c(t),j(o),i()}}}function mt(e){let t,n,s;const i=new ee({props:{size:"0.75em"}});return{c(){t=d("x-loadmore-loading"),u(i.$$.fragment),h(t,"class","svelte-1e9rorb")},m(e,n){l(e,t,n),p(i,t,null),s=!0},p:a,i(e){s||(z(i.$$.fragment,e),e&&(n||F(()=>{n=Y(t,X,{delay:150,duration:150}),n.start()})),s=!0)},o(e){L(i.$$.fragment,e),s=!1},d(e){e&&c(t),j(i)}}}function dt(e){let t,n,s,i,o,a=[],m=new Map;const $=new re({props:{scrolled:0!==e[15],$$slots:{default:[it]},$$scope:{ctx:e}}});let f=e[12];const w=e=>`${e[13].id}-${e[33].get().id}`;for(let t=0;t<f.length;t+=1){let n=Qe(e,f,t),s=w(n);m.set(s,a[t]=rt(s,n))}let v=null;f.length||(v=ot(e));let b=(e[6]||e[14])&&at(e);return{c(){u($.$$.fragment),t=g(),n=d("x-tab-content");for(let e=0;e<a.length;e+=1)a[e].c();v&&v.c(),s=g(),b&&b.c(),h(n,"class","svelte-1e9rorb")},m(c,m,d){p($,c,m),l(c,t,m),l(c,n,m);for(let e=0;e<a.length;e+=1)a[e].m(n,null);v&&v.m(n,null),r(n,s),b&&b.m(n,null),i=!0,d&&o(),o=x(n,"scroll",e[32])},p(e,t){const i={};if(32768&t[0]&&(i.scrolled=0!==e[15]),8105&t[0]|32&t[1]&&(i.$$scope={dirty:t,ctx:e}),$.$set(i),4161&t[0]){const i=e[12];B(),a=U(a,t,w,1,e,i,m,n,te,rt,s,Qe),y(),!i.length&&v?v.p(e,t):i.length?v&&(v.d(1),v=null):(v=ot(e),v.c(),v.m(n,s))}e[6]||e[14]?b?(b.p(e,t),16448&t[0]&&z(b,1)):(b=at(e),b.c(),z(b,1),b.m(n,null)):b&&(B(),L(b,1,1,()=>{b=null}),y())},i(e){if(!i){z($.$$.fragment,e);for(let e=0;e<f.length;e+=1)z(a[e]);z(b),i=!0}},o(e){L($.$$.fragment,e);for(let e=0;e<a.length;e+=1)L(a[e]);L(b),i=!1},d(e){j($,e),e&&c(t),e&&c(n);for(let e=0;e<a.length;e+=1)a[e].d();v&&v.d(),b&&b.d(),o()}}}function gt(e){let t;const n=new le({props:{$$slots:{default:[dt]},$$scope:{ctx:e}}});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},p(e,t){const s={};57321&t[0]|32&t[1]&&(s.$$scope={dirty:t,ctx:e}),n.$set(s)},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){j(n,e)}}}const ut=e=>!e.get().seen;function $t(t,n,s){let i,o,l,r,c,m=a,d=()=>(m(),m=V(y,e=>s(11,i=e)),y),g=a,u=()=>(g(),g=V(b,e=>s(12,o=e)),b),$=a,h=()=>($(),$=V(v,e=>s(13,l=e)),v),f=a,p=()=>(f(),f=V(B,e=>s(14,r=e)),B),w=a,x=()=>(w(),w=V(z,e=>s(15,c=e)),z);t.$$.on_destroy.push(()=>m()),t.$$.on_destroy.push(()=>g()),t.$$.on_destroy.push(()=>$()),t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>w());let{mailbox:v}=n;h();let{messages:b}=n;u();let{next:B}=n;p();let{prev:L}=n,{selection:y}=n;d();let{scroll:z}=n;x(),E("mailbox-selection",y);const M=()=>{const e=y.get();b.update(t=>t.filter(t=>!e.includes(t))),y.clear(),b.get().length<10&&T()},j=async e=>{i.length&&(i.forEach(t=>t.update(t=>({...t,seen:e}))),y.invalidate(),await G(l.id,i.map(e=>e.get().id),e))},k=async e=>{J(l.id,i.map(e=>e.get().id),e),M()},H=async()=>{K(l.id,i.map(e=>e.get().id)),M()};let C=!1,Z=0;let _=!1;const T=async()=>{if(!r)return;s(6,_=!0);const t=await Q(l.id,r);b.update(n=>[...n,...t.messages.map(t=>e(t))]),B.set(t.next),L.set(t.prev),s(6,_=!1)};let F,Y,I,P;return t.$set=e=>{"mailbox"in e&&h(s(0,v=e.mailbox)),"messages"in e&&u(s(1,b=e.messages)),"next"in e&&p(s(2,B=e.next)),"prev"in e&&s(25,L=e.prev),"selection"in e&&d(s(3,y=e.selection)),"scroll"in e&&x(s(4,z=e.scroll))},t.$$.update=()=>{1&t.$$.dirty[0]&&s(7,F=v===S),1&t.$$.dirty[0]&&s(8,Y=v===N),1&t.$$.dirty[0]&&s(9,I=v===A),1&t.$$.dirty[0]&&s(10,P=v===D)},[v,b,B,y,z,Z,_,F,Y,I,P,i,o,l,r,c,()=>{y.update(e=>i.length!==o.length?o.slice():[])},M,j,k,H,async()=>{if(C)return;s(5,Z++,Z),C=!0;const t=await O(l.id);b.set(t.messages.map(t=>e(t))),L.set(t.prev),B.set(t.next),y.clear(),C=!1},T,(e,t)=>(e.classList.add("removed"),e.style.zIndex="1",setTimeout(()=>e.classList.remove("removed"),1),setTimeout(()=>e.style.zIndex=null,150),{duration:150}),e=>(e.classList.add("removed"),{duration:150}),L,C,()=>j(!0),()=>j(!1),()=>k(!1),()=>k(!0),()=>H(),e=>R(z,c=e.target.scrollTop)]}class ht extends t{constructor(e){super(),n(this,e,$t,gt,s,{mailbox:0,messages:1,next:2,prev:25,selection:3,scroll:4},[-1,-1])}}function ft(e){let t;const n=new ht({props:{mailbox:e[0],messages:e[1],prev:e[2],next:e[3],selection:e[4],scroll:e[5]}});return{c(){u(n.$$.fragment)},m(e,s){p(n,e,s),t=!0},p(e,[t]){const s={};1&t&&(s.mailbox=e[0]),2&t&&(s.messages=e[1]),4&t&&(s.prev=e[2]),8&t&&(s.next=e[3]),16&t&&(s.selection=e[4]),32&t&&(s.scroll=e[5]),n.$set(s)},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){j(n,e)}}}async function pt(t,{client:n}){if(!ie.get())return this.redirect("#!/login");const s=oe(t.params.mailbox);if(null==s)return this.error({code:404,message:"La página no existe"});{const n=await O(t.params.mailbox),i=e(n.messages.map(t=>e(t))),o=e(n.next);return{mailbox:s,messages:i,prev:e(n.prev),next:o,selection:((t=[])=>{const n=e(t),s=(...e)=>{const t=n.get().slice();for(const s of e)t.includes(s)||t.push(s),n.set(t)},i=(...e)=>n.update(t=>t.filter(t=>!e.includes(t))),o=e=>n.get().includes(e),l=e(o);return n.subscribe(l.invalidate),{...n,clear:()=>n.set([]),add:s,remove:i,toggle:e=>{o(e)?i(e):s(e)},isSelected:l}})(),scroll:e(0)}}}function wt(e,t,n){let{mailbox:s}=t,{messages:i}=t,{prev:o}=t,{next:l}=t,{selection:r}=t,{scroll:a}=t;return e.$set=e=>{"mailbox"in e&&n(0,s=e.mailbox),"messages"in e&&n(1,i=e.messages),"prev"in e&&n(2,o=e.prev),"next"in e&&n(3,l=e.next),"selection"in e&&n(4,r=e.selection),"scroll"in e&&n(5,a=e.scroll)},[s,i,o,l,r,a]}export default class extends t{constructor(e){super(),n(this,e,wt,ft,s,{mailbox:0,messages:1,prev:2,next:3,selection:4,scroll:5})}}export{pt as preload};
//# sourceMappingURL=Mailbox-9d2f2468.js.map
