import{L as e,S as t,a as n,s as i,o as s,b as o,c as l,h as a,n as r,d as c,M as d,e as m,k as $,w as u,g,N as f,t as h,x as p,r as w,m as x,O as v,y as b,C as B,D as L,E as y,F as z,j as k,G as M,I as H,J as j,P as A,Q as V,R as C,T as D,U as S,V as Z,W as _,X as T,Y as F,Z as N,_ as U,$ as Y,a0 as I,a1 as P,l as R,a2 as E,a3 as G,a4 as J,a5 as O,a6 as Q,a7 as W,a8 as X,a9 as q,aa as K,ab as ee,ac as te,ad as ne,ae as ie,af as se,u as oe,ag as le}from"./main-ba2aa9bc.js";import{T as ae,a as re,M as ce,b as de,c as me,U as $e}from"./MoveTo-576940be.js";const ue=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],ge=["dom","lun","mar","mie","jue","vie","sab"],fe=e=>{const t=new Date,n=new Date(e);return t.getFullYear()!==n.getFullYear()?`${ue[n.getMonth()]} ${n.getFullYear()}`:t.getMonth()!==n.getMonth()?`${n.getDate()} ${ue[n.getMonth()]}`:t.getDate()!==n.getDate()?`${ge[n.getDay()]} ${n.getDate()}`:`${n.getHours()}:${i=n.getMinutes(),i.toString().padStart(2,"0")}`;var i};function he(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function pe(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class we extends t{constructor(e){super(),n(this,e,pe,he,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function xe(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function ve(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class be extends t{constructor(e){super(),n(this,e,ve,xe,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function Be(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Le(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class ye extends t{constructor(e){super(),n(this,e,Le,Be,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function ze(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function ke(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class Me extends t{constructor(e){super(),n(this,e,ke,ze,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function He(e){let t;const n=new ye({});return{c(){u(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function je(e){let t;const n=new Me({});return{c(){u(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Ae(e){let t;const n=new we({});return{c(){u(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Ve(e){let t;const n=new be({});return{c(){u(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Ce(e){let t,n=(e[7].from.name||e[7].from.address||"")+"";return{c(){t=g(n)},m(e,n){l(e,t,n)},p(e,i){128&i&&n!==(n=(e[7].from.name||e[7].from.address||"")+"")&&k(t,n)},d(e){e&&c(t)}}}function De(e){let t,n,i,s,r=e[2].to+"",d=(e[7].to||[]).map(Ze).filter(Boolean).join(", ")+"";return{c(){t=m("span"),n=g(r),i=$(),s=g(d),o(t,"class","for")},m(e,o){l(e,t,o),a(t,n),a(t,i),l(e,s,o)},p(e,t){4&t&&r!==(r=e[2].to+"")&&k(n,r),128&t&&d!==(d=(e[7].to||[]).map(Ze).filter(Boolean).join(", ")+"")&&k(s,d)},d(e){e&&c(t),e&&c(s)}}}function Se(e){let t,n,i,s,r,H,j,A,V,C,D,S,Z,_,T,F,N,U,Y,I,P,R,E,G,J,O=(e[7].subject||"")+"",Q=(e[7].intro||"")+"",W=(e[7].date&&fe(e[7].date))+"";const X=[je,He],q=[];function K(e,t){return e[5]?0:1}i=K(e),s=q[i]=X[i](e);const ee=new d({}),te=[Ve,Ae],ne=[];function ie(e,t){return e[7].flagged?0:1}A=ie(e),V=ne[A]=te[A](e);const se=new d({});function oe(e,t){return e[4]||e[3]?De:Ce}let le=oe(e),ae=le(e);return{c(){t=m("a"),n=m("x-cell"),s.c(),r=$(),u(ee.$$.fragment),H=$(),j=m("x-cell"),V.c(),C=$(),u(se.$$.fragment),D=$(),S=m("x-cell"),ae.c(),Z=$(),_=m("x-cell"),T=m("span"),F=g(O),N=$(),U=m("span"),Y=g(Q),I=$(),P=m("x-cell"),R=g(W),f(n,"class","btn-dark icon cell-selected svelte-gohjp2"),f(j,"class","btn-dark icon svelte-gohjp2"),h(j,"flagged",e[7].flagged),f(S,"class","from svelte-gohjp2"),o(T,"class","subject"),o(U,"class","intro svelte-gohjp2"),f(_,"class","subject-intro svelte-gohjp2"),f(P,"class","date svelte-gohjp2"),o(t,"href",E="#!/mailbox/"+e[6].id+"/message/"+e[7].id),o(t,"class","na message svelte-gohjp2"),h(t,"selected",e[5]),h(t,"unseen",!e[7].seen)},m(s,o,c){l(s,t,o),a(t,n),q[i].m(n,null),a(n,r),p(ee,n,null),a(t,H),a(t,j),ne[A].m(j,null),a(j,C),p(se,j,null),a(t,D),a(t,S),ae.m(S,null),a(t,Z),a(t,_),a(_,T),a(T,F),a(_,N),a(_,U),a(U,Y),a(t,I),a(t,P),a(P,R),G=!0,c&&w(J),J=[x(n,"click",v(b(e[19]))),x(j,"click",v(b(e[10]))),x(t,"click",e[11])]},p(e,[l]){let a=i;i=K(e),i!==a&&(B(),L(q[a],1,1,()=>{q[a]=null}),y(),s=q[i],s||(s=q[i]=X[i](e),s.c()),z(s,1),s.m(n,r));let c=A;A=ie(e),A!==c&&(B(),L(ne[c],1,1,()=>{ne[c]=null}),y(),V=ne[A],V||(V=ne[A]=te[A](e),V.c()),z(V,1),V.m(j,C)),128&l&&h(j,"flagged",e[7].flagged),le===(le=oe(e))&&ae?ae.p(e,l):(ae.d(1),ae=le(e),ae&&(ae.c(),ae.m(S,null))),(!G||128&l)&&O!==(O=(e[7].subject||"")+"")&&k(F,O),(!G||128&l)&&Q!==(Q=(e[7].intro||"")+"")&&k(Y,Q),(!G||128&l)&&W!==(W=(e[7].date&&fe(e[7].date))+"")&&k(R,W),(!G||192&l&&E!==(E="#!/mailbox/"+e[6].id+"/message/"+e[7].id))&&o(t,"href",E),32&l&&h(t,"selected",e[5]),128&l&&h(t,"unseen",!e[7].seen)},i(e){G||(z(s),z(ee.$$.fragment,e),z(V),z(se.$$.fragment,e),G=!0)},o(e){L(s),L(ee.$$.fragment,e),L(V),L(se.$$.fragment,e),G=!1},d(e){e&&c(t),q[i].d(),M(ee),ne[A].d(),M(se),ae.d(),w(J)}}}const Ze=e=>e.name||e.address;function _e(t,n,i){let s,o,l,a,c=r,d=()=>(c(),c=A(B,e=>i(6,o=e)),B),m=r,$=()=>(m(),m=A(w,e=>i(7,l=e)),w);t.$$.on_destroy.push(()=>c()),t.$$.on_destroy.push(()=>m());const u=H("mailbox-selection"),{isSelected:g,add:f,remove:h,toggle:p}=u;j(t,g,e=>i(14,s=e));let{message:w}=n;$();let x,v,b,{mailbox:B}=n;d();let L;V(()=>L&&L());const{locale:y}=H("app");j(t,y,e=>i(15,a=e));let{locale:z=a.mailboxMessage}=n;return t.$set=e=>{"message"in e&&$(i(0,w=e.message)),"mailbox"in e&&d(i(1,B=e.mailbox)),"locale"in e&&i(2,z=e.locale)},t.$$.update=()=>{2&t.$$.dirty&&i(3,x=B===C),2&t.$$.dirty&&i(4,v=B===D),16385&t.$$.dirty&&i(5,b=s(w))},[w,B,z,x,v,b,o,l,g,p,e=>{S(o.id,[l.id],!l.flagged),w.update(e=>({...e,flagged:!e.flagged}))},async t=>{if(x){t.preventDefault(),l.seen||w.update(e=>({...e,seen:!0}));const n=await Z(l.id),i=e(n);L=i.subscribe(e=>{w.update(t=>({...t,...e}))}),_(i)}},y,L,s,a,u,f,h,()=>p(w)]}class Te extends t{constructor(e){super(),n(this,e,_e,Se,i,{message:0,mailbox:1,locale:2})}}function Fe(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Ne(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class Ue extends t{constructor(e){super(),n(this,e,Ne,Fe,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function Ye(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,17H7V7H17V17Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Ie(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class Pe extends t{constructor(e){super(),n(this,e,Ie,Ye,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function Re(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Ee(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class Ge extends t{constructor(e){super(),n(this,e,Ee,Re,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function Je(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Oe(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class Qe extends t{constructor(e){super(),n(this,e,Oe,Je,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function We(e,t,n){const i=e.slice();return i[39]=t[n],i}function Xe(e){let t;const n=new Pe({});return{c(){u(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function qe(e){let t;const n=new Me({});return{c(){u(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Ke(e){let t;const n=new ye({});return{c(){u(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function et(e){let t,n,i,s,r,h,w,v,b,H,j,A,V,C,D,S,Z,_,T,F,N,U,I=e[18]("selection.title",{n:e[13].length})+"";const P=[nt,tt],R=[];function E(e,t){return 8192&t[0]&&(i=!!e[13].every(gt)),i?0:1}s=E(e,[-1]),r=R[s]=P[s](e);const G=[st,it],J=[];function O(e,t){return e[6]?0:e[8]||e[9]||e[7]?-1:1}~(w=O(e))&&(v=J[w]=G[w](e));const Q=new ie({}),W=new d({}),X=new ce({props:{mailbox:e[0],selection:e[3]}});X.$on("moved",e[20]);const ee=new Ge({});return{c(){t=m("div"),n=m("x-action-group"),r.c(),h=$(),v&&v.c(),b=$(),H=m("x-action"),u(Q.$$.fragment),j=$(),u(W.$$.fragment),V=$(),C=m("x-action-group"),u(X.$$.fragment),D=$(),S=m("x-selection-info"),u(ee.$$.fragment),Z=$(),_=m("span"),T=g(I),f(H,"class","btn-dark"),f(H,"data-tooltip",A=e[7]?e[5].actions.deletePermanently:e[8]?e[5].actions.discardDrafts:e[5].actions.delete),o(_,"class","svelte-1r6iio1"),f(S,"class","svelte-1r6iio1"),o(t,"class","only-when-selection svelte-1r6iio1")},m(i,o,r){l(i,t,o),a(t,n),R[s].m(n,null),a(n,h),~w&&J[w].m(n,null),a(n,b),a(n,H),p(Q,H,null),a(H,j),p(W,H,null),a(t,V),a(t,C),p(X,C,null),a(t,D),a(t,S),p(ee,S,null),a(S,Z),a(S,_),a(_,T),N=!0,r&&U(),U=x(H,"click",e[37])},p(e,t){let i=s;s=E(e,t),s===i?R[s].p(e,t):(B(),L(R[i],1,1,()=>{R[i]=null}),y(),r=R[s],r||(r=R[s]=P[s](e),r.c()),z(r,1),r.m(n,h));let o=w;w=O(e),w===o?~w&&J[w].p(e,t):(v&&(B(),L(J[o],1,1,()=>{J[o]=null}),y()),~w?(v=J[w],v||(v=J[w]=G[w](e),v.c()),z(v,1),v.m(n,b)):v=null),(!N||416&t[0]&&A!==(A=e[7]?e[5].actions.deletePermanently:e[8]?e[5].actions.discardDrafts:e[5].actions.delete))&&f(H,"data-tooltip",A);const l={};1&t[0]&&(l.mailbox=e[0]),8&t[0]&&(l.selection=e[3]),X.$set(l),(!N||270336&t[0])&&I!==(I=e[18]("selection.title",{n:e[13].length})+"")&&k(T,I)},i(e){N||(z(r),z(v),z(Q.$$.fragment,e),z(W.$$.fragment,e),z(X.$$.fragment,e),z(ee.$$.fragment,e),e&&Y(()=>{F||(F=q(t,K,{duration:150},!0)),F.run(1)}),N=!0)},o(e){L(r),L(v),L(Q.$$.fragment,e),L(W.$$.fragment,e),L(X.$$.fragment,e),L(ee.$$.fragment,e),e&&(F||(F=q(t,K,{duration:150},!1)),F.run(0)),N=!1},d(e){e&&c(t),R[s].d(),~w&&J[w].d(),M(Q),M(W),M(X),M(ee),e&&F&&F.end(),U()}}}function tt(e){let t,n,i,s,o;const r=new de({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",i=e[5].actions.markAsUnread)},m(i,c,d){l(i,t,c),p(r,t,null),a(t,n),p(g,t,null),s=!0,d&&o(),o=x(t,"click",e[34])},p(e,n){(!s||32&n[0]&&i!==(i=e[5].actions.markAsUnread))&&f(t,"data-tooltip",i)},i(e){s||(z(r.$$.fragment,e),z(g.$$.fragment,e),s=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),s=!1},d(e){e&&c(t),M(r),M(g),o()}}}function nt(e){let t,n,i,s,o;const r=new me({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",i=e[5].actions.markAsRead)},m(i,c,d){l(i,t,c),p(r,t,null),a(t,n),p(g,t,null),s=!0,d&&o(),o=x(t,"click",e[33])},p(e,n){(!s||32&n[0]&&i!==(i=e[5].actions.markAsRead))&&f(t,"data-tooltip",i)},i(e){s||(z(r.$$.fragment,e),z(g.$$.fragment,e),s=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),s=!1},d(e){e&&c(t),M(r),M(g),o()}}}function it(e){let t,n,i,s,o;const r=new se({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",i=e[5].actions.markAsSpam)},m(i,c,d){l(i,t,c),p(r,t,null),a(t,n),p(g,t,null),s=!0,d&&o(),o=x(t,"click",e[36])},p(e,n){(!s||32&n[0]&&i!==(i=e[5].actions.markAsSpam))&&f(t,"data-tooltip",i)},i(e){s||(z(r.$$.fragment,e),z(g.$$.fragment,e),s=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),s=!1},d(e){e&&c(t),M(r),M(g),o()}}}function st(e){let t,n,i,s,o;const r=new $e({}),g=new d({});return{c(){t=m("x-action"),u(r.$$.fragment),n=$(),u(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",i=e[5].actions.unMarkAsSpam)},m(i,c,d){l(i,t,c),p(r,t,null),a(t,n),p(g,t,null),s=!0,d&&o(),o=x(t,"click",e[35])},p(e,n){(!s||32&n[0]&&i!==(i=e[5].actions.unMarkAsSpam))&&f(t,"data-tooltip",i)},i(e){s||(z(r.$$.fragment,e),z(g.$$.fragment,e),s=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),s=!1},d(e){e&&c(t),M(r),M(g),o()}}}function ot(e){let t,n,i,s,o,r,g,h,v,b,k,H,j,A,V;const C=new d({}),D=[Ke,qe,Xe],S=[];function Z(e,t){return 0===e[13].length?0:e[13].length===e[14].length?1:2}s=Z(e),o=S[s]=D[s](e);const _=new Ue({}),T=new d({});let F=0!==e[13].length&&et(e);return{c(){t=m("x-action-group"),n=m("x-action"),u(C.$$.fragment),i=$(),o.c(),g=$(),h=m("x-action"),v=m("div"),u(_.$$.fragment),b=$(),u(T.$$.fragment),H=$(),F&&F.c(),j=R(),f(n,"class","btn-dark"),f(n,"data-tooltip",r=e[5].actions.select),ee(v,"display","flex"),ee(v,"transition","transform 300ms ease"),ee(v,"transform","rotate("+360*e[10]+"deg)"),f(h,"class","btn-dark reload"),f(h,"data-tooltip",k=e[5].actions.reload),f(t,"class","select svelte-1r6iio1")},m(o,r,c){l(o,t,r),a(t,n),p(C,n,null),a(n,i),S[s].m(n,null),a(t,g),a(t,h),a(h,v),p(_,v,null),a(h,b),p(T,h,null),l(o,H,r),F&&F.m(o,r),l(o,j,r),A=!0,c&&w(V),V=[x(n,"click",e[19]),x(h,"click",e[24])]},p(e,t){let i=s;s=Z(e),s!==i&&(B(),L(S[i],1,1,()=>{S[i]=null}),y(),o=S[s],o||(o=S[s]=D[s](e),o.c()),z(o,1),o.m(n,null)),(!A||32&t[0]&&r!==(r=e[5].actions.select))&&f(n,"data-tooltip",r),(!A||1024&t[0])&&ee(v,"transform","rotate("+360*e[10]+"deg)"),(!A||32&t[0]&&k!==(k=e[5].actions.reload))&&f(h,"data-tooltip",k),0!==e[13].length?F?(F.p(e,t),8192&t[0]&&z(F,1)):(F=et(e),F.c(),z(F,1),F.m(j.parentNode,j)):F&&(B(),L(F,1,1,()=>{F=null}),y())},i(e){A||(z(C.$$.fragment,e),z(o),z(_.$$.fragment,e),z(T.$$.fragment,e),z(F),A=!0)},o(e){L(C.$$.fragment,e),L(o),L(_.$$.fragment,e),L(T.$$.fragment,e),L(F),A=!1},d(e){e&&c(t),M(C),S[s].d(),M(_),M(T),e&&c(H),F&&F.d(e),e&&c(j),w(V)}}}function lt(e){let t,n=!e[11]&&at();return{c(){n&&n.c(),t=R()},m(e,i){n&&n.m(e,i),l(e,t,i)},p(e,i){e[11]?n&&(n.d(1),n=null):n||(n=at(),n.c(),n.m(t.parentNode,t))},d(e){n&&n.d(e),e&&c(t)}}}function at(e){let t;return{c(){t=m("x-mailbox-empty"),t.innerHTML='<span class="label svelte-1r6iio1">No hay mensajes en esta carpeta</span>',f(t,"class","svelte-1r6iio1")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function rt(e,t){let n,i,s,o;const a=new Te({props:{message:t[39],mailbox:t[0]}});return{key:e,first:null,c(){n=m("x-mailbox-message"),u(a.$$.fragment),f(n,"class","svelte-1r6iio1"),this.first=n},m(e,t){l(e,n,t),p(a,n,null),o=!0},p(e,t){const n={};16384&t[0]&&(n.message=e[39]),1&t[0]&&(n.mailbox=e[0]),a.$set(n)},i(e){o||(z(a.$$.fragment,e),e&&Y(()=>{s&&s.end(1),i||(i=I(n,t[26],{duration:150})),i.start()}),o=!0)},o(e){L(a.$$.fragment,e),i&&i.invalidate(),e&&(s=P(n,t[27],{})),o=!1},d(e){e&&c(n),M(a),e&&s&&s.end()}}}function ct(e){let t,n,i,s;const o=[mt,dt],a=[];function r(e,t){return e[11]?0:e[16]?1:-1}return~(n=r(e))&&(i=a[n]=o[n](e)),{c(){t=m("x-loadmore"),i&&i.c(),f(t,"class","svelte-1r6iio1")},m(e,i){l(e,t,i),~n&&a[n].m(t,null),s=!0},p(e,s){let l=n;n=r(e),n===l?~n&&a[n].p(e,s):(i&&(B(),L(a[l],1,1,()=>{a[l]=null}),y()),~n?(i=a[n],i||(i=a[n]=o[n](e),i.c()),z(i,1),i.m(t,null)):i=null)},i(e){s||(z(i),s=!0)},o(e){L(i),s=!1},d(e){e&&c(t),~n&&a[n].d()}}}function dt(e){let t,n,i,s,o;const g=new Qe({}),h=new d({});return{c(){t=m("x-loadmore-button"),u(g.$$.fragment),n=$(),u(h.$$.fragment),f(t,"class","btn-dark svelte-1r6iio1")},m(i,r,c){l(i,t,r),p(g,t,null),a(t,n),p(h,t,null),s=!0,c&&o(),o=x(t,"click",e[25])},p:r,i(e){s||(z(g.$$.fragment,e),z(h.$$.fragment,e),e&&(i||Y(()=>{i=I(t,K,{delay:150,duration:150}),i.start()})),s=!0)},o(e){L(g.$$.fragment,e),L(h.$$.fragment,e),s=!1},d(e){e&&c(t),M(g),M(h),o()}}}function mt(e){let t,n,i;const s=new te({props:{size:"0.75em"}});return{c(){t=m("x-loadmore-loading"),u(s.$$.fragment),f(t,"class","svelte-1r6iio1")},m(e,n){l(e,t,n),p(s,t,null),i=!0},p:r,i(e){i||(z(s.$$.fragment,e),e&&(n||Y(()=>{n=I(t,K,{delay:150,duration:150}),n.start()})),i=!0)},o(e){L(s.$$.fragment,e),i=!1},d(e){e&&c(t),M(s)}}}function $t(e){let t,n,i,s,o,r=[],d=new Map;const g=new re({props:{scrolled:0!==e[17],$$slots:{default:[ot]},$$scope:{ctx:e}}});let h=e[14];const w=e=>`${e[15].id}-${e[39].get().id}`;for(let t=0;t<h.length;t+=1){let n=We(e,h,t),i=w(n);d.set(i,r[t]=rt(i,n))}let v=null;h.length||(v=lt(e));let b=(e[11]||e[16])&&ct(e);return{c(){u(g.$$.fragment),t=$(),n=m("x-tab-content");for(let e=0;e<r.length;e+=1)r[e].c();v&&v.c(),i=$(),b&&b.c(),f(n,"class","svelte-1r6iio1")},m(c,d,m){p(g,c,d),l(c,t,d),l(c,n,d);for(let e=0;e<r.length;e+=1)r[e].m(n,null);v&&v.m(n,null),a(n,i),b&&b.m(n,null),s=!0,m&&o(),o=x(n,"scroll",e[38])},p(e,t){const s={};if(131072&t[0]&&(s.scrolled=0!==e[17]),288745&t[0]|2048&t[1]&&(s.$$scope={dirty:t,ctx:e}),g.$set(s),18433&t[0]){const s=e[14];B(),r=E(r,t,w,1,e,s,d,n,ne,rt,i,We),y(),!s.length&&v?v.p(e,t):s.length?v&&(v.d(1),v=null):(v=lt(e),v.c(),v.m(n,i))}e[11]||e[16]?b?(b.p(e,t),67584&t[0]&&z(b,1)):(b=ct(e),b.c(),z(b,1),b.m(n,null)):b&&(B(),L(b,1,1,()=>{b=null}),y())},i(e){if(!s){z(g.$$.fragment,e);for(let e=0;e<h.length;e+=1)z(r[e]);z(b),s=!0}},o(e){L(g.$$.fragment,e);for(let e=0;e<r.length;e+=1)L(r[e]);L(b),s=!1},d(e){M(g,e),e&&c(t),e&&c(n);for(let e=0;e<r.length;e+=1)r[e].d();v&&v.d(),b&&b.d(),o()}}}function ut(e){let t,n,i;document.title=t=(e[15].unseen?`(${e[15].unseen}) `:"")+e[12].label;const s=new ae({props:{$$slots:{default:[$t]},$$scope:{ctx:e}}});return{c(){n=$(),u(s.$$.fragment)},m(e,t){l(e,n,t),p(s,e,t),i=!0},p(e,n){(!i||36864&n[0])&&t!==(t=(e[15].unseen?`(${e[15].unseen}) `:"")+e[12].label)&&(document.title=t);const o={};487401&n[0]|2048&n[1]&&(o.$$scope={dirty:n,ctx:e}),s.$set(o)},i(e){i||(z(s.$$.fragment,e),i=!0)},o(e){L(s.$$.fragment,e),i=!1},d(e){e&&c(n),M(s,e)}}}const gt=e=>!e.get().seen;function ft(t,n,i){let s,o,l,a,c,d,m,$=r,u=()=>($(),$=A(k,e=>i(13,s=e)),k),g=r,f=()=>(g(),g=A(L,e=>i(14,o=e)),L),h=r,p=()=>(h(),h=A(B,e=>i(15,l=e)),B),w=r,x=()=>(w(),w=A(y,e=>i(16,a=e)),y),v=r,b=()=>(v(),v=A(_,e=>i(17,d=e)),_);t.$$.on_destroy.push(()=>$()),t.$$.on_destroy.push(()=>g()),t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>w()),t.$$.on_destroy.push(()=>v());let{mailbox:B}=n;p();let{messages:L}=n;f();let{next:y}=n;x();let{prev:z}=n,{selection:k}=n;u();let M,V,S,Z,{scroll:_}=n;b(),T("mailbox-selection",k);const Y=()=>{const e=k.get();L.update(t=>t.filter(t=>!e.includes(t))),k.clear(),L.get().length<10&&ee()},I=async e=>{s.length&&(s.forEach(t=>t.update(t=>({...t,seen:e}))),k.invalidate(),await G(l.id,s.map(e=>e.get().id),e))},P=async e=>{J(l.id,s.map(e=>e.get().id),e),Y()},R=async()=>{O(l.id,s.map(e=>e.get().id)),Y()};let E=!1,q=0;let K=!1;const ee=async()=>{if(!a)return;i(11,K=!0);const t=await W(l.id,a);L.update(n=>[...n,...t.messages.map(t=>e(t))]),y.set(t.next),z.set(t.prev),i(11,K=!1)},{locale:te,trans:ne}=H("app");j(t,te,e=>i(32,c=e)),j(t,ne,e=>i(18,m=e));let ie,{locale:se=c}=n;return t.$set=e=>{"mailbox"in e&&p(i(0,B=e.mailbox)),"messages"in e&&f(i(1,L=e.messages)),"next"in e&&x(i(2,y=e.next)),"prev"in e&&i(30,z=e.prev),"selection"in e&&u(i(3,k=e.selection)),"scroll"in e&&b(i(4,_=e.scroll)),"locale"in e&&i(5,se=e.locale)},t.$$.update=()=>{1&t.$$.dirty[0]&&i(6,M=B===F),1&t.$$.dirty[0]&&i(7,V=B===N),1&t.$$.dirty[0]&&i(8,S=B===C),1&t.$$.dirty[0]&&i(9,Z=B===D),32800&t.$$.dirty[0]&&i(12,ie=U(l,se.mailbox.title))},[B,L,y,k,_,se,M,V,S,Z,q,K,ie,s,o,l,a,d,m,()=>{k.update(e=>s.length!==o.length?o.slice():[])},Y,I,P,R,async()=>{if(E)return;i(10,q++,q),E=!0;const t=await Q(l.id);L.set(t.messages.map(t=>e(t))),z.set(t.prev),y.set(t.next),k.clear(),E=!1},ee,(e,t)=>(e.classList.add("removed"),e.style.zIndex="1",setTimeout(()=>e.classList.remove("removed"),1),setTimeout(()=>e.style.zIndex=null,150),{duration:150}),e=>(e.classList.add("removed"),{duration:150}),te,ne,z,E,c,()=>I(!0),()=>I(!1),()=>P(!1),()=>P(!0),()=>R(),e=>X(_,d=e.target.scrollTop)]}class ht extends t{constructor(e){super(),n(this,e,ft,ut,i,{mailbox:0,messages:1,next:2,prev:30,selection:3,scroll:4,locale:5},[-1,-1])}}function pt(e){let t;const n=new ht({props:{mailbox:e[0],messages:e[1],prev:e[2],next:e[3],selection:e[4],scroll:e[5]}});return{c(){u(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},p(e,[t]){const i={};1&t&&(i.mailbox=e[0]),2&t&&(i.messages=e[1]),4&t&&(i.prev=e[2]),8&t&&(i.next=e[3]),16&t&&(i.selection=e[4]),32&t&&(i.scroll=e[5]),n.$set(i)},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}async function wt(t,{client:n}){if(!oe.get())return this.redirect("#!/login");const i=le(t.params.mailbox);if(null==i)return this.error({code:404,message:"La página no existe"});{const n=await Q(t.params.mailbox),s=e(n.messages.map(t=>e(t))),o=e(n.next);return{mailbox:i,messages:s,prev:e(n.prev),next:o,selection:((t=[])=>{const n=e(t),i=(...e)=>{const t=n.get().slice();for(const i of e)t.includes(i)||t.push(i),n.set(t)},s=(...e)=>n.update(t=>t.filter(t=>!e.includes(t))),o=e=>n.get().includes(e),l=e(o);return n.subscribe(l.invalidate),{...n,clear:()=>n.set([]),add:i,remove:s,toggle:e=>{o(e)?s(e):i(e)},isSelected:l}})(),scroll:e(0)}}}function xt(e,t,n){let{mailbox:i}=t,{messages:s}=t,{prev:o}=t,{next:l}=t,{selection:a}=t,{scroll:r}=t;return e.$set=e=>{"mailbox"in e&&n(0,i=e.mailbox),"messages"in e&&n(1,s=e.messages),"prev"in e&&n(2,o=e.prev),"next"in e&&n(3,l=e.next),"selection"in e&&n(4,a=e.selection),"scroll"in e&&n(5,r=e.scroll)},[i,s,o,l,a,r]}export default class extends t{constructor(e){super(),n(this,e,xt,pt,i,{mailbox:0,messages:1,prev:2,next:3,selection:4,scroll:5})}}export{wt as preload};
//# sourceMappingURL=Mailbox-c6dd12aa.js.map
