import{L as e,S as t,a as n,s as i,o as s,b as o,c as l,h as a,n as r,d as c,M as d,e as m,k as u,w as $,g,N as f,t as h,x as p,r as w,m as x,O as v,y as b,C as B,D as L,E as y,F as z,j as k,G as M,I as H,J as A,P as V,Q as C,R as D,T as j,U as S,V as Z,W as _,X as T,Y as F,Z as N,_ as U,$ as Y,a0 as I,a1 as P,l as R,a2 as E,a3 as G,a4 as J,a5 as O,a6 as Q,a7 as W,a8 as X,a9 as q,aa as K,ab as ee,ac as te,ad as ne,ae as ie,af as se,u as oe,ag as le}from"./main-8980eb9c.js";import{T as ae,a as re,M as ce,b as de,c as me,U as ue}from"./MoveTo-6f13cb14.js";function $e(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function ge(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class fe extends t{constructor(e){super(),n(this,e,ge,$e,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function he(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function pe(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class we extends t{constructor(e){super(),n(this,e,pe,he,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function xe(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function ve(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class be extends t{constructor(e){super(),n(this,e,ve,xe,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function Be(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Le(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class ye extends t{constructor(e){super(),n(this,e,Le,Be,i,{size:4,width:0,height:1,color:2,viewBox:3})}}const ze=(e,t)=>{const n=new Date,i=new Date(e);return n.getFullYear()!==i.getFullYear()?`${t.months[i.getMonth()]} ${i.getFullYear()}`:n.getMonth()!==i.getMonth()?`${i.getDate()} ${t.months[i.getMonth()]}`:n.getDate()!==i.getDate()?`${t.weekDays[i.getDay()]} ${i.getDate()}`:`${i.getHours()}:${s=i.getMinutes(),s.toString().padStart(2,"0")}`;var s};function ke(e){let t;const n=new be({});return{c(){$(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Me(e){let t;const n=new ye({});return{c(){$(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function He(e){let t;const n=new fe({});return{c(){$(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Ae(e){let t;const n=new we({});return{c(){$(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Ve(e){let t,n=(e[7].from.name||e[7].from.address||"")+"";return{c(){t=g(n)},m(e,n){l(e,t,n)},p(e,i){128&i&&n!==(n=(e[7].from.name||e[7].from.address||"")+"")&&k(t,n)},d(e){e&&c(t)}}}function Ce(e){let t,n,i,s,r=e[2].mailboxMessage.to+"",d=(e[7].to||[]).map(je).filter(Boolean).join(", ")+"";return{c(){t=m("span"),n=g(r),i=u(),s=g(d),o(t,"class","for")},m(e,o){l(e,t,o),a(t,n),a(t,i),l(e,s,o)},p(e,t){4&t&&r!==(r=e[2].mailboxMessage.to+"")&&k(n,r),128&t&&d!==(d=(e[7].to||[]).map(je).filter(Boolean).join(", ")+"")&&k(s,d)},d(e){e&&c(t),e&&c(s)}}}function De(e){let t,n,i,s,r,H,A,V,C,D,j,S,Z,_,T,F,N,U,Y,I,P,R,E,G,J,O,Q=(e[7].subject||"")+"",W=(e[7].intro||"")+"",X=(e[7].date&&ze(e[7].date,e[2]))+"";const q=[Me,ke],K=[];function ee(e,t){return e[5]?0:1}i=ee(e),s=K[i]=q[i](e);const te=new d({}),ne=[Ae,He],ie=[];function se(e,t){return e[7].flagged?0:1}V=se(e),C=ie[V]=ne[V](e);const oe=new d({});function le(e,t){return e[4]||e[3]?Ce:Ve}let ae=le(e),re=ae(e);return{c(){t=m("a"),n=m("x-cell"),s.c(),r=u(),$(te.$$.fragment),H=u(),A=m("x-cell"),C.c(),D=u(),$(oe.$$.fragment),j=u(),S=m("x-cell-group"),Z=m("x-cell"),re.c(),_=u(),T=m("x-cell"),F=m("span"),N=g(Q),U=u(),Y=m("span"),I=g(W),P=u(),R=m("x-cell"),E=g(X),f(n,"class","btn-dark icon cell-selected svelte-i5u79c"),f(A,"class","btn-dark icon svelte-i5u79c"),h(A,"flagged",e[7].flagged),f(Z,"class","from svelte-i5u79c"),o(F,"class","subject"),o(Y,"class","intro svelte-i5u79c"),f(T,"class","subject-intro svelte-i5u79c"),f(R,"class","date svelte-i5u79c"),f(S,"class","from-subject-date svelte-i5u79c"),o(t,"href",G="#!/mailbox/"+e[6].id+"/message/"+e[7].id),o(t,"class","na message svelte-i5u79c"),h(t,"selected",e[5]),h(t,"unseen",!e[7].seen)},m(s,o,c){l(s,t,o),a(t,n),K[i].m(n,null),a(n,r),p(te,n,null),a(t,H),a(t,A),ie[V].m(A,null),a(A,D),p(oe,A,null),a(t,j),a(t,S),a(S,Z),re.m(Z,null),a(S,_),a(S,T),a(T,F),a(F,N),a(T,U),a(T,Y),a(Y,I),a(S,P),a(S,R),a(R,E),J=!0,c&&w(O),O=[x(n,"click",v(b(e[19]))),x(A,"click",v(b(e[10]))),x(t,"click",e[11])]},p(e,[l]){let a=i;i=ee(e),i!==a&&(B(),L(K[a],1,1,()=>{K[a]=null}),y(),s=K[i],s||(s=K[i]=q[i](e),s.c()),z(s,1),s.m(n,r));let c=V;V=se(e),V!==c&&(B(),L(ie[c],1,1,()=>{ie[c]=null}),y(),C=ie[V],C||(C=ie[V]=ne[V](e),C.c()),z(C,1),C.m(A,D)),128&l&&h(A,"flagged",e[7].flagged),ae===(ae=le(e))&&re?re.p(e,l):(re.d(1),re=ae(e),re&&(re.c(),re.m(Z,null))),(!J||128&l)&&Q!==(Q=(e[7].subject||"")+"")&&k(N,Q),(!J||128&l)&&W!==(W=(e[7].intro||"")+"")&&k(I,W),(!J||132&l)&&X!==(X=(e[7].date&&ze(e[7].date,e[2]))+"")&&k(E,X),(!J||192&l&&G!==(G="#!/mailbox/"+e[6].id+"/message/"+e[7].id))&&o(t,"href",G),32&l&&h(t,"selected",e[5]),128&l&&h(t,"unseen",!e[7].seen)},i(e){J||(z(s),z(te.$$.fragment,e),z(C),z(oe.$$.fragment,e),J=!0)},o(e){L(s),L(te.$$.fragment,e),L(C),L(oe.$$.fragment,e),J=!1},d(e){e&&c(t),K[i].d(),M(te),ie[V].d(),M(oe),re.d(),w(O)}}}const je=e=>e.name||e.address;function Se(t,n,i){let s,o,l,a,c=r,d=()=>(c(),c=V(B,e=>i(6,o=e)),B),m=r,u=()=>(m(),m=V(w,e=>i(7,l=e)),w);t.$$.on_destroy.push(()=>c()),t.$$.on_destroy.push(()=>m());const $=H("mailbox-selection"),{isSelected:g,add:f,remove:h,toggle:p}=$;A(t,g,e=>i(14,s=e));let{message:w}=n;u();let x,v,b,{mailbox:B}=n;d();let L;C(()=>L&&L());const{locale:y}=H("app");A(t,y,e=>i(15,a=e));let{locale:z=a}=n;return t.$set=e=>{"message"in e&&u(i(0,w=e.message)),"mailbox"in e&&d(i(1,B=e.mailbox)),"locale"in e&&i(2,z=e.locale)},t.$$.update=()=>{2&t.$$.dirty&&i(3,x=B===D),2&t.$$.dirty&&i(4,v=B===j),16385&t.$$.dirty&&i(5,b=s(w))},[w,B,z,x,v,b,o,l,g,p,e=>{S(o.id,[l.id],!l.flagged),w.update(e=>({...e,flagged:!e.flagged}))},async t=>{if(x){t.preventDefault(),l.seen||w.update(e=>({...e,seen:!0}));const n=await Z(l.id),i=e(n);L=i.subscribe(e=>{w.update(t=>({...t,...e}))}),_(i)}},y,L,s,a,$,f,h,()=>p(w)]}class Ze extends t{constructor(e){super(),n(this,e,Se,De,i,{message:0,mailbox:1,locale:2})}}function _e(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Te(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class Fe extends t{constructor(e){super(),n(this,e,Te,_e,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function Ne(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V5H19V19M17,17H7V7H17V17Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Ue(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class Ye extends t{constructor(e){super(),n(this,e,Ue,Ne,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function Ie(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Pe(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class Re extends t{constructor(e){super(),n(this,e,Pe,Ie,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function Ee(e){let t,n;return{c(){t=s("svg"),n=s("path"),o(n,"d","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"),o(n,"fill",e[2]),o(t,"width",e[0]),o(t,"height",e[1]),o(t,"viewBox",e[3])},m(e,i){l(e,t,i),a(t,n)},p(e,[i]){4&i&&o(n,"fill",e[2]),1&i&&o(t,"width",e[0]),2&i&&o(t,"height",e[1]),8&i&&o(t,"viewBox",e[3])},i:r,o:r,d(e){e&&c(t)}}}function Ge(e,t,n){let{size:i="1em"}=t,{width:s=i}=t,{height:o=i}=t,{color:l="currentColor"}=t,{viewBox:a="0 0 24 24"}=t;return e.$set=e=>{"size"in e&&n(4,i=e.size),"width"in e&&n(0,s=e.width),"height"in e&&n(1,o=e.height),"color"in e&&n(2,l=e.color),"viewBox"in e&&n(3,a=e.viewBox)},[s,o,l,a,i]}class Je extends t{constructor(e){super(),n(this,e,Ge,Ee,i,{size:4,width:0,height:1,color:2,viewBox:3})}}function Oe(e,t,n){const i=e.slice();return i[39]=t[n],i}function Qe(e){let t;const n=new Ye({});return{c(){$(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function We(e){let t;const n=new ye({});return{c(){$(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function Xe(e){let t;const n=new be({});return{c(){$(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}function qe(e){let t,n,i,s,r,h,w,v,b,H,A,V,C,D,j,S,Z,_,T,F,N,U,I=e[18]("selection.title",{n:e[13].length})+"";const P=[et,Ke],R=[];function E(e,t){return 8192&t[0]&&(i=!!e[13].every(ut)),i?0:1}s=E(e,[-1]),r=R[s]=P[s](e);const G=[nt,tt],J=[];function O(e,t){return e[6]?0:e[8]||e[9]||e[7]?-1:1}~(w=O(e))&&(v=J[w]=G[w](e));const Q=new ie({}),W=new d({}),X=new ce({props:{mailbox:e[0],selection:e[3]}});X.$on("moved",e[20]);const ee=new Re({});return{c(){t=m("div"),n=m("x-action-group"),r.c(),h=u(),v&&v.c(),b=u(),H=m("x-action"),$(Q.$$.fragment),A=u(),$(W.$$.fragment),C=u(),D=m("x-action-group"),$(X.$$.fragment),j=u(),S=m("x-selection-info"),$(ee.$$.fragment),Z=u(),_=m("span"),T=g(I),f(H,"class","btn-dark"),f(H,"data-tooltip",V=e[7]?e[5].actions.deletePermanently:e[8]?e[5].actions.discardDrafts:e[5].actions.delete),o(_,"class","svelte-1r6iio1"),f(S,"class","svelte-1r6iio1"),o(t,"class","only-when-selection svelte-1r6iio1")},m(i,o,r){l(i,t,o),a(t,n),R[s].m(n,null),a(n,h),~w&&J[w].m(n,null),a(n,b),a(n,H),p(Q,H,null),a(H,A),p(W,H,null),a(t,C),a(t,D),p(X,D,null),a(t,j),a(t,S),p(ee,S,null),a(S,Z),a(S,_),a(_,T),N=!0,r&&U(),U=x(H,"click",e[37])},p(e,t){let i=s;s=E(e,t),s===i?R[s].p(e,t):(B(),L(R[i],1,1,()=>{R[i]=null}),y(),r=R[s],r||(r=R[s]=P[s](e),r.c()),z(r,1),r.m(n,h));let o=w;w=O(e),w===o?~w&&J[w].p(e,t):(v&&(B(),L(J[o],1,1,()=>{J[o]=null}),y()),~w?(v=J[w],v||(v=J[w]=G[w](e),v.c()),z(v,1),v.m(n,b)):v=null),(!N||416&t[0]&&V!==(V=e[7]?e[5].actions.deletePermanently:e[8]?e[5].actions.discardDrafts:e[5].actions.delete))&&f(H,"data-tooltip",V);const l={};1&t[0]&&(l.mailbox=e[0]),8&t[0]&&(l.selection=e[3]),X.$set(l),(!N||270336&t[0])&&I!==(I=e[18]("selection.title",{n:e[13].length})+"")&&k(T,I)},i(e){N||(z(r),z(v),z(Q.$$.fragment,e),z(W.$$.fragment,e),z(X.$$.fragment,e),z(ee.$$.fragment,e),e&&Y(()=>{F||(F=q(t,K,{duration:150},!0)),F.run(1)}),N=!0)},o(e){L(r),L(v),L(Q.$$.fragment,e),L(W.$$.fragment,e),L(X.$$.fragment,e),L(ee.$$.fragment,e),e&&(F||(F=q(t,K,{duration:150},!1)),F.run(0)),N=!1},d(e){e&&c(t),R[s].d(),~w&&J[w].d(),M(Q),M(W),M(X),M(ee),e&&F&&F.end(),U()}}}function Ke(e){let t,n,i,s,o;const r=new de({}),g=new d({});return{c(){t=m("x-action"),$(r.$$.fragment),n=u(),$(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",i=e[5].actions.markAsUnread)},m(i,c,d){l(i,t,c),p(r,t,null),a(t,n),p(g,t,null),s=!0,d&&o(),o=x(t,"click",e[34])},p(e,n){(!s||32&n[0]&&i!==(i=e[5].actions.markAsUnread))&&f(t,"data-tooltip",i)},i(e){s||(z(r.$$.fragment,e),z(g.$$.fragment,e),s=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),s=!1},d(e){e&&c(t),M(r),M(g),o()}}}function et(e){let t,n,i,s,o;const r=new me({}),g=new d({});return{c(){t=m("x-action"),$(r.$$.fragment),n=u(),$(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",i=e[5].actions.markAsRead)},m(i,c,d){l(i,t,c),p(r,t,null),a(t,n),p(g,t,null),s=!0,d&&o(),o=x(t,"click",e[33])},p(e,n){(!s||32&n[0]&&i!==(i=e[5].actions.markAsRead))&&f(t,"data-tooltip",i)},i(e){s||(z(r.$$.fragment,e),z(g.$$.fragment,e),s=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),s=!1},d(e){e&&c(t),M(r),M(g),o()}}}function tt(e){let t,n,i,s,o;const r=new se({}),g=new d({});return{c(){t=m("x-action"),$(r.$$.fragment),n=u(),$(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",i=e[5].actions.markAsSpam)},m(i,c,d){l(i,t,c),p(r,t,null),a(t,n),p(g,t,null),s=!0,d&&o(),o=x(t,"click",e[36])},p(e,n){(!s||32&n[0]&&i!==(i=e[5].actions.markAsSpam))&&f(t,"data-tooltip",i)},i(e){s||(z(r.$$.fragment,e),z(g.$$.fragment,e),s=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),s=!1},d(e){e&&c(t),M(r),M(g),o()}}}function nt(e){let t,n,i,s,o;const r=new ue({}),g=new d({});return{c(){t=m("x-action"),$(r.$$.fragment),n=u(),$(g.$$.fragment),f(t,"class","btn-dark"),f(t,"data-tooltip",i=e[5].actions.unMarkAsSpam)},m(i,c,d){l(i,t,c),p(r,t,null),a(t,n),p(g,t,null),s=!0,d&&o(),o=x(t,"click",e[35])},p(e,n){(!s||32&n[0]&&i!==(i=e[5].actions.unMarkAsSpam))&&f(t,"data-tooltip",i)},i(e){s||(z(r.$$.fragment,e),z(g.$$.fragment,e),s=!0)},o(e){L(r.$$.fragment,e),L(g.$$.fragment,e),s=!1},d(e){e&&c(t),M(r),M(g),o()}}}function it(e){let t,n,i,s,o,r,g,h,v,b,k,H,A,V,C;const D=new d({}),j=[Xe,We,Qe],S=[];function Z(e,t){return 0===e[13].length?0:e[13].length===e[14].length?1:2}s=Z(e),o=S[s]=j[s](e);const _=new Fe({}),T=new d({});let F=0!==e[13].length&&qe(e);return{c(){t=m("x-action-group"),n=m("x-action"),$(D.$$.fragment),i=u(),o.c(),g=u(),h=m("x-action"),v=m("div"),$(_.$$.fragment),b=u(),$(T.$$.fragment),H=u(),F&&F.c(),A=R(),f(n,"class","btn-dark"),f(n,"data-tooltip",r=e[5].actions.select),ee(v,"display","flex"),ee(v,"transition","transform 300ms ease"),ee(v,"transform","rotate("+360*e[10]+"deg)"),f(h,"class","btn-dark reload"),f(h,"data-tooltip",k=e[5].actions.reload),f(t,"class","select svelte-1r6iio1")},m(o,r,c){l(o,t,r),a(t,n),p(D,n,null),a(n,i),S[s].m(n,null),a(t,g),a(t,h),a(h,v),p(_,v,null),a(h,b),p(T,h,null),l(o,H,r),F&&F.m(o,r),l(o,A,r),V=!0,c&&w(C),C=[x(n,"click",e[19]),x(h,"click",e[24])]},p(e,t){let i=s;s=Z(e),s!==i&&(B(),L(S[i],1,1,()=>{S[i]=null}),y(),o=S[s],o||(o=S[s]=j[s](e),o.c()),z(o,1),o.m(n,null)),(!V||32&t[0]&&r!==(r=e[5].actions.select))&&f(n,"data-tooltip",r),(!V||1024&t[0])&&ee(v,"transform","rotate("+360*e[10]+"deg)"),(!V||32&t[0]&&k!==(k=e[5].actions.reload))&&f(h,"data-tooltip",k),0!==e[13].length?F?(F.p(e,t),8192&t[0]&&z(F,1)):(F=qe(e),F.c(),z(F,1),F.m(A.parentNode,A)):F&&(B(),L(F,1,1,()=>{F=null}),y())},i(e){V||(z(D.$$.fragment,e),z(o),z(_.$$.fragment,e),z(T.$$.fragment,e),z(F),V=!0)},o(e){L(D.$$.fragment,e),L(o),L(_.$$.fragment,e),L(T.$$.fragment,e),L(F),V=!1},d(e){e&&c(t),M(D),S[s].d(),M(_),M(T),e&&c(H),F&&F.d(e),e&&c(A),w(C)}}}function st(e){let t,n=!e[11]&&ot();return{c(){n&&n.c(),t=R()},m(e,i){n&&n.m(e,i),l(e,t,i)},p(e,i){e[11]?n&&(n.d(1),n=null):n||(n=ot(),n.c(),n.m(t.parentNode,t))},d(e){n&&n.d(e),e&&c(t)}}}function ot(e){let t;return{c(){t=m("x-mailbox-empty"),t.innerHTML='<span class="label svelte-1r6iio1">No hay mensajes en esta carpeta</span>',f(t,"class","svelte-1r6iio1")},m(e,n){l(e,t,n)},d(e){e&&c(t)}}}function lt(e,t){let n,i,s,o;const a=new Ze({props:{message:t[39],mailbox:t[0]}});return{key:e,first:null,c(){n=m("x-mailbox-message"),$(a.$$.fragment),f(n,"class","svelte-1r6iio1"),this.first=n},m(e,t){l(e,n,t),p(a,n,null),o=!0},p(e,t){const n={};16384&t[0]&&(n.message=e[39]),1&t[0]&&(n.mailbox=e[0]),a.$set(n)},i(e){o||(z(a.$$.fragment,e),e&&Y(()=>{s&&s.end(1),i||(i=I(n,t[26],{duration:150})),i.start()}),o=!0)},o(e){L(a.$$.fragment,e),i&&i.invalidate(),e&&(s=P(n,t[27],{})),o=!1},d(e){e&&c(n),M(a),e&&s&&s.end()}}}function at(e){let t,n,i,s;const o=[ct,rt],a=[];function r(e,t){return e[11]?0:e[16]?1:-1}return~(n=r(e))&&(i=a[n]=o[n](e)),{c(){t=m("x-loadmore"),i&&i.c(),f(t,"class","svelte-1r6iio1")},m(e,i){l(e,t,i),~n&&a[n].m(t,null),s=!0},p(e,s){let l=n;n=r(e),n===l?~n&&a[n].p(e,s):(i&&(B(),L(a[l],1,1,()=>{a[l]=null}),y()),~n?(i=a[n],i||(i=a[n]=o[n](e),i.c()),z(i,1),i.m(t,null)):i=null)},i(e){s||(z(i),s=!0)},o(e){L(i),s=!1},d(e){e&&c(t),~n&&a[n].d()}}}function rt(e){let t,n,i,s,o;const g=new Je({}),h=new d({});return{c(){t=m("x-loadmore-button"),$(g.$$.fragment),n=u(),$(h.$$.fragment),f(t,"class","btn-dark svelte-1r6iio1")},m(i,r,c){l(i,t,r),p(g,t,null),a(t,n),p(h,t,null),s=!0,c&&o(),o=x(t,"click",e[25])},p:r,i(e){s||(z(g.$$.fragment,e),z(h.$$.fragment,e),e&&(i||Y(()=>{i=I(t,K,{delay:150,duration:150}),i.start()})),s=!0)},o(e){L(g.$$.fragment,e),L(h.$$.fragment,e),s=!1},d(e){e&&c(t),M(g),M(h),o()}}}function ct(e){let t,n,i;const s=new te({props:{size:"0.75em"}});return{c(){t=m("x-loadmore-loading"),$(s.$$.fragment),f(t,"class","svelte-1r6iio1")},m(e,n){l(e,t,n),p(s,t,null),i=!0},p:r,i(e){i||(z(s.$$.fragment,e),e&&(n||Y(()=>{n=I(t,K,{delay:150,duration:150}),n.start()})),i=!0)},o(e){L(s.$$.fragment,e),i=!1},d(e){e&&c(t),M(s)}}}function dt(e){let t,n,i,s,o,r=[],d=new Map;const g=new re({props:{scrolled:0!==e[17],$$slots:{default:[it]},$$scope:{ctx:e}}});let h=e[14];const w=e=>`${e[15].id}-${e[39].get().id}`;for(let t=0;t<h.length;t+=1){let n=Oe(e,h,t),i=w(n);d.set(i,r[t]=lt(i,n))}let v=null;h.length||(v=st(e));let b=(e[11]||e[16])&&at(e);return{c(){$(g.$$.fragment),t=u(),n=m("x-tab-content");for(let e=0;e<r.length;e+=1)r[e].c();v&&v.c(),i=u(),b&&b.c(),f(n,"class","svelte-1r6iio1")},m(c,d,m){p(g,c,d),l(c,t,d),l(c,n,d);for(let e=0;e<r.length;e+=1)r[e].m(n,null);v&&v.m(n,null),a(n,i),b&&b.m(n,null),s=!0,m&&o(),o=x(n,"scroll",e[38])},p(e,t){const s={};if(131072&t[0]&&(s.scrolled=0!==e[17]),288745&t[0]|2048&t[1]&&(s.$$scope={dirty:t,ctx:e}),g.$set(s),18433&t[0]){const s=e[14];B(),r=E(r,t,w,1,e,s,d,n,ne,lt,i,Oe),y(),!s.length&&v?v.p(e,t):s.length?v&&(v.d(1),v=null):(v=st(e),v.c(),v.m(n,i))}e[11]||e[16]?b?(b.p(e,t),67584&t[0]&&z(b,1)):(b=at(e),b.c(),z(b,1),b.m(n,null)):b&&(B(),L(b,1,1,()=>{b=null}),y())},i(e){if(!s){z(g.$$.fragment,e);for(let e=0;e<h.length;e+=1)z(r[e]);z(b),s=!0}},o(e){L(g.$$.fragment,e);for(let e=0;e<r.length;e+=1)L(r[e]);L(b),s=!1},d(e){M(g,e),e&&c(t),e&&c(n);for(let e=0;e<r.length;e+=1)r[e].d();v&&v.d(),b&&b.d(),o()}}}function mt(e){let t,n,i;document.title=t=(e[15].unseen?`(${e[15].unseen}) `:"")+e[12].label;const s=new ae({props:{$$slots:{default:[dt]},$$scope:{ctx:e}}});return{c(){n=u(),$(s.$$.fragment)},m(e,t){l(e,n,t),p(s,e,t),i=!0},p(e,n){(!i||36864&n[0])&&t!==(t=(e[15].unseen?`(${e[15].unseen}) `:"")+e[12].label)&&(document.title=t);const o={};487401&n[0]|2048&n[1]&&(o.$$scope={dirty:n,ctx:e}),s.$set(o)},i(e){i||(z(s.$$.fragment,e),i=!0)},o(e){L(s.$$.fragment,e),i=!1},d(e){e&&c(n),M(s,e)}}}const ut=e=>!e.get().seen;function $t(t,n,i){let s,o,l,a,c,d,m,u=r,$=()=>(u(),u=V(k,e=>i(13,s=e)),k),g=r,f=()=>(g(),g=V(L,e=>i(14,o=e)),L),h=r,p=()=>(h(),h=V(B,e=>i(15,l=e)),B),w=r,x=()=>(w(),w=V(y,e=>i(16,a=e)),y),v=r,b=()=>(v(),v=V(_,e=>i(17,d=e)),_);t.$$.on_destroy.push(()=>u()),t.$$.on_destroy.push(()=>g()),t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>w()),t.$$.on_destroy.push(()=>v());let{mailbox:B}=n;p();let{messages:L}=n;f();let{next:y}=n;x();let{prev:z}=n,{selection:k}=n;$();let M,C,S,Z,{scroll:_}=n;b(),T("mailbox-selection",k);const Y=()=>{const e=k.get();L.update(t=>t.filter(t=>!e.includes(t))),k.clear(),L.get().length<10&&ee()},I=async e=>{s.length&&(s.forEach(t=>t.update(t=>({...t,seen:e}))),k.invalidate(),await G(l.id,s.map(e=>e.get().id),e))},P=async e=>{J(l.id,s.map(e=>e.get().id),e),Y()},R=async()=>{O(l.id,s.map(e=>e.get().id)),Y()};let E=!1,q=0;let K=!1;const ee=async()=>{if(!a)return;i(11,K=!0);const t=await W(l.id,a);L.update(n=>[...n,...t.messages.map(t=>e(t))]),y.set(t.next),z.set(t.prev),i(11,K=!1)},{locale:te,trans:ne}=H("app");A(t,te,e=>i(32,c=e)),A(t,ne,e=>i(18,m=e));let ie,{locale:se=c}=n;return t.$set=e=>{"mailbox"in e&&p(i(0,B=e.mailbox)),"messages"in e&&f(i(1,L=e.messages)),"next"in e&&x(i(2,y=e.next)),"prev"in e&&i(30,z=e.prev),"selection"in e&&$(i(3,k=e.selection)),"scroll"in e&&b(i(4,_=e.scroll)),"locale"in e&&i(5,se=e.locale)},t.$$.update=()=>{1&t.$$.dirty[0]&&i(6,M=B===F),1&t.$$.dirty[0]&&i(7,C=B===N),1&t.$$.dirty[0]&&i(8,S=B===D),1&t.$$.dirty[0]&&i(9,Z=B===j),32800&t.$$.dirty[0]&&i(12,ie=U(l,se.mailbox.title))},[B,L,y,k,_,se,M,C,S,Z,q,K,ie,s,o,l,a,d,m,()=>{k.update(e=>s.length!==o.length?o.slice():[])},Y,I,P,R,async()=>{if(E)return;i(10,q++,q),E=!0;const t=await Q(l.id);L.set(t.messages.map(t=>e(t))),z.set(t.prev),y.set(t.next),k.clear(),E=!1},ee,(e,t)=>(e.classList.add("removed"),e.style.zIndex="1",setTimeout(()=>e.classList.remove("removed"),1),setTimeout(()=>e.style.zIndex=null,150),{duration:150}),e=>(e.classList.add("removed"),{duration:150}),te,ne,z,E,c,()=>I(!0),()=>I(!1),()=>P(!1),()=>P(!0),()=>R(),e=>X(_,d=e.target.scrollTop)]}class gt extends t{constructor(e){super(),n(this,e,$t,mt,i,{mailbox:0,messages:1,next:2,prev:30,selection:3,scroll:4,locale:5},[-1,-1])}}function ft(e){let t;const n=new gt({props:{mailbox:e[0],messages:e[1],prev:e[2],next:e[3],selection:e[4],scroll:e[5]}});return{c(){$(n.$$.fragment)},m(e,i){p(n,e,i),t=!0},p(e,[t]){const i={};1&t&&(i.mailbox=e[0]),2&t&&(i.messages=e[1]),4&t&&(i.prev=e[2]),8&t&&(i.next=e[3]),16&t&&(i.selection=e[4]),32&t&&(i.scroll=e[5]),n.$set(i)},i(e){t||(z(n.$$.fragment,e),t=!0)},o(e){L(n.$$.fragment,e),t=!1},d(e){M(n,e)}}}async function ht(t,{client:n}){if(!oe.get())return this.redirect("#!/login");const i=le(t.params.mailbox);if(null==i)return this.error({code:404,message:"La página no existe"});{const n=await Q(t.params.mailbox),s=e(n.messages.map(t=>e(t))),o=e(n.next);return{mailbox:i,messages:s,prev:e(n.prev),next:o,selection:((t=[])=>{const n=e(t),i=(...e)=>{const t=n.get().slice();for(const i of e)t.includes(i)||t.push(i),n.set(t)},s=(...e)=>n.update(t=>t.filter(t=>!e.includes(t))),o=e=>n.get().includes(e),l=e(o);return n.subscribe(l.invalidate),{...n,clear:()=>n.set([]),add:i,remove:s,toggle:e=>{o(e)?s(e):i(e)},isSelected:l}})(),scroll:e(0)}}}function pt(e,t,n){let{mailbox:i}=t,{messages:s}=t,{prev:o}=t,{next:l}=t,{selection:a}=t,{scroll:r}=t;return e.$set=e=>{"mailbox"in e&&n(0,i=e.mailbox),"messages"in e&&n(1,s=e.messages),"prev"in e&&n(2,o=e.prev),"next"in e&&n(3,l=e.next),"selection"in e&&n(4,a=e.selection),"scroll"in e&&n(5,r=e.scroll)},[i,s,o,l,a,r]}export default class extends t{constructor(e){super(),n(this,e,pt,ft,i,{mailbox:0,messages:1,prev:2,next:3,selection:4,scroll:5})}}export{ht as preload};
//# sourceMappingURL=Mailbox-78504961.js.map
